<!-- FORM OVERLAY (dans la page d'accueil) -->
<div class="container py-3 py-md-4">
	<div class="bg-white rounded-4 shadow-sm p-3 p-md-4">
		<form id="carpool-filter-form" class="g-3">
			<h2 class="h4 h3-md text-secondary mb-3">
				<i class="bi bi-geo-alt-fill text-primary"></i>
				Rechercher un covoiturage
			</h2>

			<div
				class="row g-2 g-md-3 align-items-end">
				<!-- D√©part -->
				<div class="col-12 col-md-4">
					<label for="departureCity" class="form-label small text-muted mb-1" id="labelDepart">Ville de d√©part</label>
					<div class="input-group">
						<input type="text" id="departureCity" name="deparatureCity" class="form-control" placeholder="Paris, Lille‚Ä¶" autocomplete="off" required>
					</div>
				</div>

				<!-- Swap -->
				<div class="col-12 col-md-auto d-flex justify-content-center">
					<button type="button" id="swap" class="btn btn-success rounded-circle shadow-sm  mt-md-4" title="Permuter D√©part / Arriv√©e" aria-label="Permuter villes" style="width:56px;height:56px;display:flex;align-items:center;justify-content:center;">
						<i class="bi bi-arrow-left-right"></i>
					</button>
				</div>

				<!-- Arriv√©e -->
				<div class="col-12 col-md-4">
					<label for="destinationCity" class="form-label small text-muted mb-1" id="labelArrivee">Ville d'arriv√©e</label>
					<div class="input-group">
						<input type="text" id="destinationCity" name="arrivalCity" class="form-control" placeholder="Marseille, Lyon‚Ä¶" autocomplete="off" required>
					</div>
				</div>

				<!-- Date -->
				<div class="col-12 col-md-3">
					<label for="travelDate" class="form-label small text-muted mb-1" id="labelDate">Date de d√©part</label>
					<div class="input-group">
						<input type="date" id="travelDate" name="deparatureAt" class="form-control" min="{{ 'now'|date('Y-m-d') }}">
					</div>
				</div>

				<!-- Rechercher -->
				<div class="col-12 col-md-12 d-grid">
					<label class="form-label mb-1 invisible">Rechercher</label>
					<button type="submit" class="btn btn-primary text-white w-100 rounded">
						<i class="bi bi-search me-1"></i>
						Rechercher
					</button>
				</div>
			</div>
		</form>
	</div>
</div>

 <script>
(() => {
	const dep = document.getElementById('departureCity');
	const dest = document.getElementById('destinationCity');
	const dateI = document.getElementById('travelDate');
	const swap = document.getElementById('swap');

	// Permutation des villes
	swap?.addEventListener('click', () => {
		const tmp = dep.value;
		dep.value = dest.value;
		dest.value = tmp;
		dep.focus();
	});

	// Soumission du formulaire
	const form = document.getElementById('carpool-filter-form');
	form?.addEventListener('submit', (e) => {
		e.preventDefault();

		const params = new URLSearchParams(new FormData(form)).toString();

		// üîó Redirection vers la page des r√©sultats
const targetUrl = "{{ path('app_front_search_ride') }}?" + params;

		window.location.href = targetUrl;
	});
})();
</script>

