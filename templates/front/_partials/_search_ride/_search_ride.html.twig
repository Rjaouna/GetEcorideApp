<!-- FORM OVERLAY (à placer dans l'overlay du slider) -->
<div class="container py-3 py-md-4">
	<div class="bg-white rounded-4 shadow-sm p-3 p-md-4">
		<form method="get" action="#" class="g-3">
			<h2 class="h4 h3-md text-secondary mb-3">
				<i class="bi bi-geo-alt-fill text-primary"></i>
				Rechercher un covoiturage
			</h2>

			<div
				class="row g-2 g-md-3 align-items-end">
				<!-- Départ -->
				<div class="col-12 col-md-4">
					<label for="departureCity" class="form-label small text-muted mb-1" id="labelDepart">Ville de départ</label>
					<div class="input-group">
						<input type="text" id="departureCity" name="depart" class="form-control" placeholder="Paris, Lille…" autocomplete="off" required value="{{ depart|default('') }}">
					</div>
				</div>

				<!-- Swap -->
				<div class="col-12 col-md-auto d-flex justify-content-center">
					<button type="button" id="swap" class="btn btn-success rounded-circle shadow-sm  mt-md-4" title="Permuter Départ / Arrivée" aria-label="Permuter villes" style="width:56px;height:56px;display:flex;align-items:center;justify-content:center;">
						<i class="bi bi-arrow-left-right"></i>
					</button>
				</div>

				<!-- Arrivée -->
				<div class="col-12 col-md-4">
					<label for="destinationCity" class="form-label small text-muted mb-1" id="labelArrivee">Ville d'arrivée</label>
					<div class="input-group">
						<input type="text" id="destinationCity" name="arrivee" class="form-control" placeholder="Marseille, Lyon…" autocomplete="off" required value="{{ arrivee|default('') }}">
					</div>
				</div>

				<!-- Date -->
				<div class="col-12 col-md-3">
					<label for="travelDate" class="form-label small text-muted mb-1" id="labelDate">Date de départ</label>
					<div class="input-group">
						<input type="date" id="travelDate" name="departAt" class="form-control" value="{{ (departAt ?? 'now')|date('Y-m-d') }}" min="{{ 'now'|date('Y-m-d') }}">
					</div>
				</div>

				<!-- Rechercher -->
				<div class="col-12 col-md-12 d-grid">
					<label class="form-label mb-1 invisible">Rechercher</label>
					<button type="submit" class="btn btn-primary text-white w-100 rounded">
						<i class="bi bi-search me-1"></i>
						Rechercher
					</button>
				</div>
			</div>
		</form>
	</div>
</div>

 <script>
(() => {
  const dep=document.getElementById('departureCity');
  const dest=document.getElementById('destinationCity');
  const dateI=document.getElementById('travelDate');
  const swap=document.getElementById('swap');
  const lblDep=document.getElementById('labelDepart');
  const lblArr=document.getElementById('labelArrivee');
  const lblDat=document.getElementById('labelDate');

  const LBL_DEFAULT={dep:'Ville de départ',arr:"Ville D'arrivée",dat:'Date de départ'};
  const LBL_FOCUS={dep:"D'où partez-vous ?",arr:"Où allez-vous ?",dat:"Quand partez-vous ?"};
  const focusLabel=(el,t)=>{ if(!el)return; el.textContent=t; el.classList.add('label-focus'); };
  const blurLabel =(el,t)=>{ if(!el)return; el.textContent=t; el.classList.remove('label-focus'); };

  dep?.addEventListener('focus',()=>focusLabel(lblDep,LBL_FOCUS.dep));
dep?.addEventListener('blur', ()=>focusLabel (lblDep, LBL_DEFAULT.dep));

  dest?.addEventListener('focus',()=>focusLabel(lblArr,LBL_FOCUS.arr));
dest?.addEventListener('blur', ()=>focusLabel (lblArr, LBL_DEFAULT.arr));

  dateI?.addEventListener('focus',()=>focusLabel(lblDat,LBL_FOCUS.dat));
dateI?.addEventListener('blur', ()=>focusLabel (lblDat, LBL_DEFAULT.dat));


  swap?.addEventListener('click',()=>{ const tmp=dep.value; dep.value=dest.value; dest.value=tmp; dep.focus(); });

  if(dateI && !dateI.value){ const today=new Date().toISOString().split('T')[0]; dateI.min=today; }
})();
</script>
